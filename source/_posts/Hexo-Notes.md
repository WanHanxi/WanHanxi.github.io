---
title: Hexo Notes
date: 2020-12-20 16:06:43
categories: 笔记
description: Some notes about the usage of hexo & Next.theme
---

# Add Notes

## Generate New md-notes

```bash
#new md file
npx hexo new '<title>'
```

Edit your markdown file. You can find **title.md** in /source/_posts

```bash
#generate
npx hexo g
npx hexo s #set up local server
```

```bash
#deploy
npx hexo clean #clean cache
npx hexo g -d
```

## Generate Draft

```bash
#optional: generate draft
npx hexo new draft '<title>'
#saved in /source/_drafts

#push
npx hexo publish [layout] <filename>
```

# Counting tools & Comment sys.

https://www.luanzhuxian.com/post/ec069b41.html

email notification

https://github.com/DesertsP/Valine-Admin

# Generate `categoryies` page
https://blog.csdn.net/u011240016/article/details/79422462
# Backup `Hexo` source code

## Backup

1. build a new branch `hexo` in the repository.

2. Set the `hexo` branch as default in `Settings` of the repository, which saves specifying branches when pushing.

3. Open git bash under any directory you like

   ```bash
   #clone the current repository
   git clone git@github.com:<usrname>/<usrname>.github.io.git
   ```

   This will clone the `hexo` branch since it has been set as default.

4. Delete everything in the cloned directory except `.deploy_git`, copy all previous file into this directory.

   The `.gitignore` file should contains

   ```
   .DS_Store
   Thumbs.db
   db.json
   *.log
   node_modules/
   public/
   .deploy*/
   ```

   **Note: **If the themes in `/theme` is generated by cloning, you should delete the `.git` folder in `/theme/<theme name>`, or you won't be able to upload your theme files.

5. Push the changes to the repository

```bash
#under the hexo dir
git add .
git commit –m "add branch"
git push 
```

## Restore

1. Install supplementary packages

```bash
#install git
sudo apt-get install git

#set user name and mail address
git config --global user.name "<your github name>"
git config --global user.email "<your github email>"

#set ssh key
ssh-keygen -t rsa -C "<your email>"
#Then fill in the key in github settings

#verification
ssh -T git@github.com

#install node.js
sudo apt-get install nodejs
sudo apt-get install npm

#install hexo
sudo npm install hexo-cli -g
```

2. Clone the respository under any folder:

```bash
#clone the current repository
git clone git@github.com:<usrname>/<usrname>.github.io.git

cd <usrname>.github.io
npm install
npm install hexo-deployer-git --save
```

3. Generate and deploy

```bash
hexo g
hexo d
```

# 首页文章不展示全文显示摘要

## 安装hexo-excerpt

新版Next主题已经删除了这个选项，可以先安装插件，再进行相关配置就可以启用首页预览。

在网站根目录下运行：

```text
npm install hexo-excerpt --save
```

在站点配置文件里添加：

```text
excerpt:
  depth: 5  
  excerpt_excludes: []
  more_excludes: []
  hideWholePostExcerpts: true
```

主题配置文件设置：

```text
excerpt_description: true
...
read_more_btn: true
```

```作者：天地阔远
链接：https://www.zhihu.com/question/394167076/answer/1418593507
来源：知乎
```

## 使用

- 法一：手动截断

  在希望截断的地方加入`<!--more-->`

  这样首页仅显示标记以上的内容

- 法二：写概述

  在`front-matter`字段添加`description`，形如

  ```
  ---
  title: 让首页显示部分内容
  date: 2020-02-23 22:55:10
  description: 这是显示在首页的概述，正文内容均会被隐藏。
  ---
  ```

# 引用本地图片问题

https://cloud.tencent.com/developer/article/1702112

https://github.com/xcodebuild/hexo-asset-image

# Reference

[超详细Hexo+Github Page搭建技术博客教程【持续更新】_个人文章 - SegmentFault 思否](https://segmentfault.com/a/1190000017986794)

[hexo史上最全搭建教程 - zjufangzh](https://blog.csdn.net/sinat_37781304/article/details/82729029)

[设置hexo首页只显示部分摘要](https://blog.csdn.net/yueyue200830/article/details/104470646/)